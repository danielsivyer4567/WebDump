$(document).ready(function(){var urlParams=new URLSearchParams(window.location.search),name=urlParams.get("name"),color=urlParams.get("color"),style=urlParams.get("style"),product=null,cart=[],gatesConfig=[],productFormData={name:null,style:null,color:null},oldDrawingData=null,woodGateSizes=0;typeof Storage<"u"&&(oldDrawingData=sessionStorage.getItem("drawingData"),oldDrawingData&&(oldDrawingData=JSON.parse(oldDrawingData))),urlParams.has("edit-drawing")&&oldDrawingData&&!name&&(window.location.search="?edit-drawing=true&name="+oldDrawingData.name+"&style="+oldDrawingData.style+"&color="+oldDrawingData.color),urlParams.has("change-type")&&oldDrawingData&&$("#typeFormSubmit").html("RECALCULATE");function setProduct(){switch(style){case"vinyl":color=="null"&&(color="White"),CONFIG.forEach(function(val){val.Color===color&&val.Name===name&&(product=val)});break;case"wood":var tmp=null,colorFound=!1;CONFIG.forEach(function(val){val.Color===color&&val.Name===name&&(product=val,colorFound=!0),val.Name===name&&(tmp=val)}),colorFound||(product=tmp);break;default:CONFIG.forEach(function(val){val.Name===name&&(product=val)});break}}function setGateConfig(){switch(style){case"chain-link":gatesConfig=CHAIN_LINK_OPENINGS[name];break;case"ornamental-iron":gatesConfig=OI_OPENINGS[name];break;case"vinyl":gatesConfig=VINYL_OPENINGS[name];break}}if(setProduct(),setGateConfig(),console.log(name),console.log(color),console.log(style),console.log(product),$("#spinner").hide(),$("#main-content").fadeIn(500),!product){typeof Storage<"u"&&sessionStorage.setItem("calculator",""),window.localStorage.setItem("step","0");var formTypes=[],selectedType="",selectedStyle="",selectedHeight="",selectedColor="";Object.keys(CALCULATOR_FORM).forEach(function(val){formTypes.push({id:val,text:val})}),$("#form-type").select2({data:formTypes,placeholder:"Select a type",allowClear:!0,width:"300px"}),$("#form-type").on("select2:select",function(e){var data=e.params.data;selectedType=data.id,selectedStyle="",selectedHeight="",selectedColor="",productFormData.style=data.id,$("#form-style").empty(),$("#form-style").append(new Option("","",!1,!1)),$("#form-height").empty(),$("#form-height").append(new Option("","",!1,!1)),$("#form-color").empty(),$("#form-color").append(new Option("","",!1,!1)),Object.keys(CALCULATOR_FORM[data.id]).forEach(function(val){$("#form-style").append(new Option(val,val,!1,!1))})}),$("#form-style").select2({placeholder:"Select a style",allowClear:!0,width:"300px"}),$("#form-style").on("select2:select",function(e){var data=e.params.data;selectedStyle=data.id,selectedHeight="",selectedColor="",$("#form-height").empty(),$("#form-height").append(new Option("","",!1,!1)),$("#form-color").empty(),$("#form-color").append(new Option("","",!1,!1)),Object.keys(CALCULATOR_FORM[selectedType][selectedStyle]).forEach(function(val){$("#form-height").append(new Option(val,val,!1,!1))})}),$("#form-height").select2({placeholder:"Select a height",allowClear:!0,width:"300px"}),$("#form-height").on("select2:select",function(e){var data=e.params.data;selectedHeight=data.id,$("#form-color").empty(),$("#form-color").append(new Option("","",!1,!1));var isEmpty=!1;Object.keys(CALCULATOR_FORM[selectedType][selectedStyle][selectedHeight]).forEach(function(val){val==""?(isEmpty=!0,$("#form-color").empty(),$("#form-color").append(new Option("No Color","1",!1,!1)),$("#form-color").attr("required",!1),productFormData.name=CALCULATOR_FORM[selectedType][selectedStyle][selectedHeight][""],console.log(productFormData.name)):val=="Black"?(console.log("black"),$("#form-color").empty(),$("#form-color").append(new Option(val,val,!1,!1)),$("#form-color").attr("required",!1),console.log(productFormData.name),productFormData.name=CALCULATOR_FORM[selectedType][selectedStyle][selectedHeight].Black,console.log(productFormData.name)):val=="Galvanized"?(console.log("Galvanized"),$("#form-color").empty(),$("#form-color").append(new Option(val,val,!1,!1)),$("#form-color").attr("required",!1),console.log(productFormData.name),productFormData.name=CALCULATOR_FORM[selectedType][selectedStyle][selectedHeight].Galvanized,console.log(productFormData.name)):val=="Cedar"?(console.log("Cedar"),$("#form-color").empty(),$("#form-color").append(new Option(val,val,!1,!1)),$("#form-color").attr("required",!1),console.log(productFormData.name),productFormData.name=CALCULATOR_FORM[selectedType][selectedStyle][selectedHeight].Cedar,console.log(productFormData.name)):(console.log("color unknown"),$("#form-color").append(new Option(val,val,!1,!1)),$("#form-color").attr("required",!0),console.log(productFormData.name))})}),$("#form-color").select2({placeholder:"Select a color",allowClear:!0,width:"300px"}),$("#form-color").on("select2:select",function(e){var data=e.params.data;productFormData.name=CALCULATOR_FORM[selectedType][selectedStyle][selectedHeight][data.id],productFormData.color=data.id}),$("#formCalculate").submit(function(e){return e.preventDefault(),console.log(productFormData.style),productFormData.style=="Chain Link"&&(productFormData.style="chain-link"),productFormData.style=="Ornamental"&&(productFormData.style="ornamental-iron"),urlParams.has("change-type")&&oldDrawingData?(name=productFormData.name,style=productFormData.style.toLowerCase(),color=productFormData.color,setProduct(),setGateConfig(),calculateDrawingTool(oldDrawingData.inventory,oldDrawingData.rawData)):window.location.search="?name="+productFormData.name+"&style="+productFormData.style.toLowerCase()+"&color="+productFormData.color,!0});return}var dtWindow=null;function openDrawingTool(data){var windowName=window.location.href;if(dtWindow&&!dtWindow.closed)dtWindow.focus();else{var urlBase="https://afpw.americafence.com/drawing-tool/";dtWindow=window.open(urlBase+"?_mode=shopify",windowName,"height=900,width=1400,top=0,left=0,resizable=0")}const onReadyMessage=event=>{event.data&&event.data.type==="ready"&&(data&&dtWindow.postMessage({type:"load-drawing",data},"*"),product.ImageUrl&&dtWindow.postMessage({type:"load-image",url:product.ImageUrl},"*"),window.removeEventListener("message",onReadyMessage))};window.addEventListener("message",onReadyMessage)}$("#btn-start-drawing-tool").click(function(){openDrawingTool()}),$("#btn-start-drawing-tool-popup-blocked").click(function(){window.location.search="?edit-drawing=true&name="+oldDrawingData.name+"&style="+oldDrawingData.style+"&color="+oldDrawingData.color});function calculateDrawingTool(inventory,rawData){if(inventory&&inventory.length>0){var fence=inventory[0];console.log("Drawing Tool Fence",fence),woodGateSizes=inventory[0].Gates;var calc=$("#calc-dt");calc.empty(),fence.Segments.forEach(s=>{var footageInput=$("<input>").attr({class:"footage-input",value:s.Length});calc.append(footageInput)}),fence.Posts.forEach(p=>{var typeLookup={endpost:"End",cornerpost:"Corner",blankpost:"Blank",gatepost:"Gate"},type=typeLookup[p.PostType];if(type){var select=$("<select>").attr({class:"term-post-input"}),option=$("<option>").attr({value:type,selected:"selected"});select.append(option),calc.append(select)}});var gateIds=fence.Gates.map(g=>{var type="Single";g.Description.match("double")&&(type="Double");var config={Key:type,Opening:g.Length},configSearch=gatesConfig.filter(c=>c.Key==type&&c.Opening==g.Length);return configSearch.length>0&&(config=configSearch[0]),config}).filter(g=>g!=null&&g!=null);gateIds.forEach(g=>{var select=$("<select>").attr({class:"fg-input"}),option=$("<option>").attr({value:g.Key,selected:"selected","data-id":g.ID,"data-opening":g.Opening});select.append(option),calc.append(select)}),window.usedDrawingTool=!0;var drawingData={inventory,rawData,name,color,style};typeof Storage<"u"&&window.sessionStorage.setItem("drawingData",JSON.stringify(drawingData)),calculate()}}window.addEventListener("message",function(message){var inventory=message.data.inventory,rawData=message.data.rawData;calculateDrawingTool(inventory,rawData)});var oldCalculator=null;typeof Storage<"u"&&(oldCalculator=sessionStorage.getItem("calculator"));var startTmpl=Handlebars.compile($("#startTmpl").html());if(console.log(oldCalculator),oldDrawingData&&urlParams.has("edit-drawing"))$("#tool-selector").hide(),$("#example-drawing-tool").show(),$("#main-calculator").hide(),openDrawingTool(oldDrawingData.rawData);else if(oldCalculator)$("#exampleInput").hide(),$("#main-calculator").show(),$("#formSection").hide(),$("#startSection").show(),$("#calcImg").show(),setTimeout(function(){console.log("set values..."),$("#calc-1").html(oldCalculator);var exist=$("section[class^='section-term-']").last();if(exist.length>0){var cls=$(exist).attr("class").replace("section-term-","");termPostIdx=parseInt(cls)}$("html, body").animate({scrollTop:0},"slow"),registerSelectHandlers(),populateExample(),$(".btn-add").click(addTermPost),$(".btn-remove").click(removeTermPost),$(".btn-calculate").click(calculate)},500);else{var html=startTmpl({gates:gatesConfig});$("#startSection").append(html),product&&($("#tool-selector").show(),$("#main-calculator").hide())}$("#btn-draw-fence").click(function(){$("#tool-selector").hide(),$("#example-drawing-tool").show(),$("#main-calculator").hide()}),$("#btn-enter-fence").click(function(){$("#tool-selector").hide(),$("#example").show(),$("#main-calculator").hide()});var termPostTmpl=Handlebars.compile($("#termPostTmpl").html()),termPostTmplExample=Handlebars.compile($("#termPostTmplExample").html()),termPostIdx=2,exp=[{idx:1,term:"Gate post",fence:"Single gate(4\u2019 opening)",footage:""},{idx:2,term:"Gate post",fence:"Fence run",footage:"6"},{idx:4,term:"Corner post",fence:"Fence run",footage:"60"},{idx:5,term:"Corner post",fence:"Fence run",footage:"49"},{idx:6,term:"Gate post",fence:"Double Gate(8\u2019 opening)",footage:""},{idx:7,term:"Gate post",fence:"Fence run",footage:"44"},{idx:8,term:"Corner post",fence:"Fence run",footage:"60"},{idx:9,term:"Corner post",fence:"Fence run",footage:"12"},{idx:10,term:"Gate post",fence:"Single gate(4\u2019 opening)",footage:""},{idx:11,term:"Blank post",fence:"",footage:""}];function addTermPost(e){var lastPost=$(".term-post-input[data-post='"+termPostIdx+"']").val();lastPost||(lastPost=$(".select.term-post.term-post-input").last().val());var fenceType=$(".fg-input[data-post='"+termPostIdx+"']").val(),isCorner=lastPost==="Corner",isGate=lastPost==="Gate";!isCorner||!isGate?termPostIdx++:termPostIdx+=2;var idx2=isCorner||isGate?termPostIdx:termPostIdx+1,html2=termPostTmpl({idx:termPostIdx,idx2,isGate,notCorner:!isCorner,notGate:!isGate,gates:gatesConfig});$("#calc-1").append(html2),registerSelectHandlers()}function removeTermPost(e){termPostIdx!=2&&($(".section-term-"+termPostIdx).remove(),termPostIdx--,$(".section-term-"+termPostIdx).remove(),termPostIdx--,registerSelectHandlers())}function populateExample(){exp.forEach(function(val){var html2=termPostTmplExample(val);$("#exampleInputShow").append(html2)})}var locState=window.localStorage.getItem("step");locState||(locState=0),locState>=3&&(locState=0,window.localStorage.setItem("step",locState));function showElem(val){$("#example").hide(),$("#exampleInput").hide(),$("#main-calculator").hide(),$(val).show()}$("#btnViewExample").click(function(e){$("#example").hide(),$("#exampleInput").show(),locState++,window.localStorage.setItem("step",locState),window.history.pushState({step:"1"},"")}),$("#btnStartCalculator").click(function(e){$("#example").hide(),$("#exampleInput").hide(),$("#main-calculator").show(),$("#formSection").hide(),$("#startSection").show(),$("#calcImg").show(),$("html, body").animate({scrollTop:0},"slow"),locState=2,window.localStorage.setItem("step",locState),window.history.pushState({step:"2"},""),window.history.pushState({step:"2"},"")}),$("#btnMyCalc").click(function(e){$("#exampleInput").hide(),$("#main-calculator").show(),$("#formSection").hide(),$("#startSection").show(),$("#calcImg").show(),$("html, body").animate({scrollTop:0},"slow"),locState++,window.localStorage.setItem("step",locState),window.history.pushState({step:"2"},"")}),window.addEventListener("popstate",function(e){switch(parseInt(window.localStorage.getItem("step"))){case 1:showElem("#example"),window.locState--,locState--,window.localStorage.setItem("step",locState);break;case 2:showElem("#exampleInput"),locState--,window.localStorage.setItem("step",locState);break}});function onSelectChange(e){var post=$(this).data("post"),value=$(this,"option:selected").val();value==="Single"||value==="Double"?$(".post-"+post).prop("disabled",!0):$(".post-"+post).prop("disabled",!1)}function registerSelectHandlers(){$(".fg-input").on("change",onSelectChange)}function calculate(e){switch($("input,select,textarea").each(function(){$(this).is("[type='checkbox']")||$(this).is("[type='checkbox']")?$(this).attr("checked",$(this).attr("checked")):$(this).is("select")?$(this).find(":selected").attr("selected","selected"):$(this).attr("value",$(this).val())}),console.log("style",style),typeof Storage<"u"&&sessionStorage.setItem("calculator",$("#calc-1").html()),style){case"vinyl":calculateVinly();break;case"chain-link":calculateChain();break;case"ornamental-iron":product.Name.includes("-aluminum-")?calculateOrnamentalAluminum():calculateOrnamental();break;case"wood":calculateWood();break}}function calculateWood(){var post=1,picket=0,rail=0,oc=96;$(".footage-input").each(function(i,val){var input=parseInt($(val).val());if(input){post+=Math.ceil(input*12/oc);var tmpPicket=input;name==="6-shadow-box-wood"||name==="4-shadow-box-wood-with-6-pickets"||name==="6-shadow-box-scalloped-wood"||name==="4-shadow-box-scalloped-wood"?picket+=Math.ceil(tmpPicket*2.89):name==="6-picket-wood-w-1-gap"||name==="4-picket-wood-fence"||name==="6-picket-scalloped-wood"||name==="4-picket-scalloped-wood"?picket+=Math.ceil(tmpPicket*12/6.5):picket+=Math.ceil(tmpPicket*12/5.5)}});var gate=$(".term-post-input :selected[value='Gate']").length,extraRail=0;if(gate>0){var single=$(".fg-input :selected[value='Single']").length,double=$(".fg-input :selected[value='Double']").length,latch=0,hinge=0;$.each(woodGateSizes,function(index,value){var tmpPicket=value.Length;console.log("gate size: ",value.Length),console.log("starting picket ",picket),post+=Math.ceil(tmpPicket*12/oc),name==="6-shadow-box-wood"||name==="4-shadow-box-wood-with-6-pickets"||name==="6-shadow-box-scalloped-wood"||name==="4-shadow-box-scalloped-wood"?picket+=Math.ceil(tmpPicket*2.89):name==="6-picket-wood-w-1-gap"||name==="4-picket-wood-fence"||name==="6-picket-scalloped-wood"||name==="4-picket-scalloped-wood"?picket+=Math.ceil(tmpPicket*12/6.5):picket+=Math.ceil(tmpPicket*12/5.5),console.log("ending picket ",picket)}),single&&(latch+=single,hinge+=single,extraRail+=3*single),double&&(latch+=double,hinge+=double*2,extraRail+=6*double,cart.push({id:product.DropRod,quantity:double})),latch&&cart.push({id:product.Latch,quantity:latch}),hinge&&cart.push({id:product.Hinge,quantity:hinge})}console.log("post",post),cart.push({id:product.Post,quantity:post}),picket=picket+Math.ceil(picket*.05),console.log("picket",picket),cart.push({id:product.Picket,quantity:picket}),rail=Math.ceil((post-1)*parseInt(product.Additional)),rail=rail+extraRail,console.log("rail",rail),cart.push({id:product.Rail,quantity:rail}),$.LoadingOverlay("show"),removeCart(function(){add(cart.shift())})}function calculateChain(){var line=0,total_input=0;$(".footage-input").each(function(i,val){var input=$(val).val();if(input){input=parseInt(input),total_input+=input;var l=input.toString().length;if(l==2){var j=Math.floor(input/10);input%10==0?line+=j-1:line+=j}else if(l==3){var j=Math.floor(input/10);line+=j-1}else l==1?line+=0:line+=input}}),console.log(line),cart.push({id:product.Fabric,quantity:total_input}),line>0&&cart.push({id:product.LinePost,quantity:line});var gate=$(".term-post-input :selected[value='Gate']").length,forkLatchHanger=0;if(gate>0){cart.push({id:product.EndCornerPost,quantity:gate});var single=$(".fg-input :selected[value='Single']").length,double=$(".fg-input :selected[value='Double']").length,total=single+double;forkLatchHanger=total,cart.push({id:product.ForkLatchHanger,quantity:total}),cart.push({id:product.ForkLatch,quantity:total});var maleHinge=0,femaleHinge=0;single>0&&(maleHinge=2*single,femaleHinge=2*single,cart.push({id:product.MaleHinge,quantity:maleHinge}),cart.push({id:product.FemaleHinge,quantity:femaleHinge})),double>0&&(maleHinge=4*double,femaleHinge=6*double,cart.push({id:product.MaleHinge,quantity:maleHinge}),cart.push({id:product.FemaleHinge,quantity:femaleHinge}),cart.push({id:product.DropRod,quantity:double})),cart.push({id:product.CarriageBoltMaleHinge,quantity:maleHinge}),cart.push({id:product.CarriageBoltFemaleHinge,quantity:femaleHinge})}$(".fg-input :selected[value='Single']").each(function(i,val){var id=$(val).data("id");if(id)cart.push({id,quantity:val});else return}),$(".fg-input :selected[value='Double']").each(function(i,val){var id=$(val).data("id");if(id)cart.push({id,quantity:val});else return});var corner=$(".term-post-input :selected[value='Corner']").length;console.log("corner",corner);var end=$(".term-post-input :selected[value='End']").length;console.log("end",end),cart.push({id:product.EndCornerPost,quantity:end+corner});var tension=0;name.match("42")||name.match("48")?tension=3:name.match("60")?tension=4:name.match("72")?tension=5:name.match("36")&&(tension=2),console.log("tension",tension);var tensionBands=gate*tension+end*tension+corner*tension*2;tension>0&&cart.push({id:product.TensionBand,quantity:tensionBands});var railends=end+gate+corner*2;console.log("railends",railends),cart.push({id:product.RailEnds,quantity:railends});var endbands=railends;console.log("endbands",endbands),cart.push({id:product.EndBand,quantity:endbands}),end>0&&(console.log("EndPostCap",end),cart.push({id:product.EndPostCap,quantity:end+corner+gate}));var lineTops=$(".term-post-input").length;console.log("lineTops",lineTops),line>0&&cart.push({id:product.LineTop,quantity:line});var blackCarriage=endbands+tensionBands+forkLatchHanger*2;console.log("blackCarriage",blackCarriage),cart.push({id:product.CarriageBoltTensionBand,quantity:blackCarriage});var topRail=parseInt(Math.ceil(total_input/21));cart.push({id:product.TopRail,quantity:topRail}),cart.push({id:product.WireTires,quantity:Math.ceil(total_input/100)}),endbands>0?cart.push({id:product.TensionBar,quantity:endbands}):railends>0&&cart.push({id:product.TensionBar,quantity:railends}),$.LoadingOverlay("show"),removeCart(function(){add(cart.shift())})}function calculateOrnamental(){var panel=0,line=0,hinge=0,latch=0,droprod=0;$(".footage-input").each(function(i2,val){var input=$(val).val();if(input){var res=Math.ceil(parseInt($(val).val()*12)/96.75);panel+=res,line+=Math.floor(parseInt($(val).val()*12)/96.75)}}),console.log("line",line),cart.push({id:product.EndCornerPost,quantity:line}),console.log("panel",panel),cart.push({id:product.Panel,quantity:panel});var corner=$(".term-post-input :selected[value='Corner']").length;console.log("corner",corner),corner>0&&cart.push({id:product.EndCornerPost,quantity:corner});var end=$(".term-post-input :selected[value='End']").length;console.log("end",end),end>0&&cart.push({id:product.EndCornerPost,quantity:end});var blank=$(".term-post-input :selected[value='Blank']").length;console.log("blank",blank),blank>0&&cart.push({id:product.EndCornerPost,quantity:blank});var gate=$(".term-post-input :selected[value='Gate']").length;if(console.log("gate",gate),gate>0){product.GatePost&&(cart.push({id:product.GatePost,quantity:gate}),cart.push({id:product.GatePostCap,quantity:gate})),cart.push({id:product.EndCornerPost,quantity:gate});var single=$(".fg-input :selected[value='Single']").length,double=$(".fg-input :selected[value='Double']").length;if(console.log("single",single),console.log("double",double),single>0){cart.push({id:product.ForkLatch,quantity:single});for(var i=0;i<single;i++)hinge+=2,latch+=1}if(double>0)for(var i=0;i<double;i++)hinge+=4,latch+=1,droprod+=1;hinge>0&&(cart.push({id:product.MaleHinge,quantity:hinge}),cart.push({id:product.FemaleHinge,quantity:hinge})),latch>0&&cart.push({id:product.LatchHanger,quantity:latch}),droprod>0&&cart.push({id:product.DoubleSwingGateDropRod,quantity:droprod})}var gatesIds={},counter=1;$(".fg-input :selected[value='Single']").each(function(i2,val){var id=$(val).data("id");id&&(gatesIds[id]=counter,counter++)}),counter>1&&$.each(gatesIds,function(a,b){cart.push({id:a,quantity:b})}),counter=1,gatesIds={},$(".fg-input :selected[value='Double']").each(function(i2,val){var id=$(val).data("id");id&&(gatesIds[id]=counter,counter++)}),counter>1&&$.each(gatesIds,function(a,b){cart.push({id:a,quantity:b})});var capq=line+corner+gate+blank+end;console.log("capq",capq),cart.push({id:product.EndCornerCap,quantity:capq}),cart.push({id:product.FlatMountBracket,quantity:parseInt(panel*product.BracketMultiply)}),$.LoadingOverlay("show"),removeCart(function(){add(cart.shift())})}function calculateOrnamentalAluminum(){var panel=0,line=0;$(".footage-input").each(function(i,val){var input=$(val).val();if(input){var res=Math.ceil(parseInt($(val).val()*12)/72);panel+=res,line+=Math.floor(parseInt($(val).val()*12)/72)}}),console.log("line",line),cart.push({id:product.EndCornerPost,quantity:line}),console.log("panel",panel),cart.push({id:product.Panel,quantity:panel});var corner=$(".term-post-input :selected[value='Corner']").length;console.log("corner",corner),corner>0&&cart.push({id:product.EndCornerPost,quantity:corner});var end=$(".term-post-input :selected[value='End']").length;console.log("end",end),end>0&&cart.push({id:product.EndCornerPost,quantity:end});var blank=$(".term-post-input :selected[value='Blank']").length;console.log("blank",blank),blank>0&&cart.push({id:product.EndCornerPost,quantity:blank});var gate=$(".term-post-input :selected[value='Gate']").length;if(console.log("gate",gate),gate>0){product.GatePost&&(cart.push({id:product.GatePost,quantity:gate}),cart.push({id:product.GatePostCap,quantity:gate}));var single=$(".fg-input :selected[value='Single']").length,double=$(".fg-input :selected[value='Double']").length;console.log("single",single),console.log("double",double),single>0&&cart.push({id:product.ForkLatch,quantity:single}),double>0}var gatesIds={},counter=1;$(".fg-input :selected[value='Single']").each(function(i,val){var id=$(val).data("id");id&&(gatesIds[id]=counter,counter++)}),counter>1&&$.each(gatesIds,function(a,b){cart.push({id:a,quantity:b})}),counter=1,gatesIds={},$(".fg-input :selected[value='Double']").each(function(i,val){var id=$(val).data("id");id&&(gatesIds[id]=counter,counter++)}),counter>1&&$.each(gatesIds,function(a,b){cart.push({id:a,quantity:b})});var capq=line+corner+gate+blank+end;console.log("capq",capq),cart.push({id:product.EndCornerCap,quantity:capq}),$.LoadingOverlay("show"),removeCart(function(){add(cart.shift())})}function calculateVinly(){var panel=0,line=0,hinge=0,latch=0,droprod=0,oc=product.oc?parseInt(product.oc):93;$(".footage-input").each(function(i2,val){var input=$(val).val();if(input){var res=Math.ceil(parseInt($(val).val())*12/oc);panel+=res,line+=Math.floor(parseInt($(val).val())*12/oc)}}),console.log("line",line),cart.push({id:product.LinePost,quantity:line}),console.log("panel",panel),cart.push({id:product.Panel,quantity:panel});var corner=$(".term-post-input :selected[value='Corner']").length;corner>0&&cart.push({id:product.CornerPost,quantity:corner});var gate=$(".term-post-input :selected[value='Gate']").length;console.log("gate",gate);var end=$(".term-post-input :selected[value='End']").length,maxEnd=end;if(gate>0){maxEnd=end+gate;var single=$(".fg-input :selected[value='Single']").length,double=$(".fg-input :selected[value='Double']").length;if(console.log("single",single),console.log("double",double),single>0){cart.push({id:product.GatePostInsert,quantity:single});for(var i=0;i<single;i++)hinge+=1,latch+=1}if(double>0){cart.push({id:product.GatePostInsert,quantity:double*2});for(var i=0;i<double;i++)hinge+=2,latch+=1,droprod+=1}}$(".fg-input :selected[value='Single']").each(function(i2,val){var id=$(val).data("id");if(id)cart.push({id,quantity:val});else return}),$(".fg-input :selected[value='Double']").each(function(i2,val){var id=$(val).data("id");if(id)cart.push({id,quantity:val});else return}),console.log("end",end),end>0&&cart.push({id:product.EndPost,quantity:maxEnd});var blank=$(".term-post-input :selected[value='Blank']").length;console.log("blank",blank);var caps=line+corner+end+gate+blank;console.log("caps",caps),cart.push({id:product.Cap,quantity:caps}),hinge>0&&cart.push({id:product.Hinge,quantity:hinge}),latch>0&&cart.push({id:product.Latch,quantity:latch}),droprod>0&&cart.push({id:product.DropRod,quantity:droprod}),blank>0&&cart.push({id:product.BlankPost,quantity:blank});var glue=Math.ceil(caps/16);console.log("glue",glue),glue>0&&cart.push({id:product.Glue,quantity:glue}),$.LoadingOverlay("show"),removeCart(function(){add(cart.shift())})}oldCalculator||(registerSelectHandlers(),populateExample(),$(".btn-add").click(addTermPost),$(".btn-remove").click(removeTermPost),$(".btn-calculate").click(calculate));function add(item){Shopify.addItem(item.id,item.quantity,function(e){cart.length>0?add(cart.shift()):($.LoadingOverlay("hide"),window.usedDrawingTool?window.location="/cart?_drawing=true":window.location="/cart")})}function removeCart(callback){Shopify.clear(callback)}setTimeout(function(){$(".tooltip-corner-post").hover(function(){$(this).append('<span class="tooltiptext">Corner post</span>').hide().fadeIn(300)},function(){$(this).find("span").remove()}),$(".tooltip-gate-post").hover(function(){$(this).append('<span class="tooltiptext">Gate</span>').hide().fadeIn(300)},function(){$(this).find("span").remove()}),$(".tooltip-run-post").hover(function(){$(this).append('<span class="tooltiptext">Fence run</span>').hide().fadeIn(300)},function(){$(this).find("span").remove()})},500)});
//# sourceMappingURL=/cdn/shop/t/24/assets/calculator.js.map?v=122426148414574081411739209077
